<dashboard stylesheet="trafficlight.css">
  <label>Live Dashboard</label>
  <description>This is the demo dashboard for the Alpha proof of concept.</description>
  <row>
    <panel>
      <single>
        <title>Splunk License Usage</title>
        <search>
          <query>index="_internal" source="*metrics.log" per_index_thruput | eval GB=kb/(1024*1024) | timechart span=1d sum(GB) | convert ctime(_time) as timestamp</query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="height">131</option>
        <option name="numberPrecision">0.0</option>
        <option name="rangeColors">["0x65a637","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[75,85]</option>
        <option name="showSparkline">0</option>
        <option name="showTrendIndicator">0</option>
        <option name="unit">%</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">0</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Uptime (minutes)</title>
        <search>
          <query>index="performance"| stats first(uptime) as Uptime</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="height">132</option>
        <option name="rangeColors">["0x65a637","0xd93f3c"]</option>
        <option name="rangeValues">[100000]</option>
        <option name="showSparkline">0</option>
        <option name="showTrendIndicator">0</option>
        <option name="unit">mins</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Percentage of Failed Queries (%)</title>
        <search>
          <query>index="performance"| stats first(percentage_failed_queries) as Uptime</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="linkFields">underlabel, afterlabel</option>
        <option name="linkView">drilldown</option>
        <option name="height">131</option>
        <option name="rangeColors">["0x65a637","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[1.1,21]</option>
        <option name="underLabel">dashboard</option>
        <option name="unit">%</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Single Match Time (s)</title>
        <search>
          <query>index="performance" | timechart avg(single_match_time) as single_match_time</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="height">131</option>
        <option name="rangeValues">[2,4,5,7]</option>
        <option name="trendDisplayMode">percent</option>
        <option name="unit">s</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Bulk Match Time (s)</title>
        <search>
          <query>index="performance" | timechart avg(bulk_match_time) as BulkMatchTime</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="height">130</option>
        <option name="rangeValues">[50,55,57,58]</option>
        <option name="trendDisplayMode">percent</option>
        <option name="unit">s</option>
        <option name="useColors">1</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <single>
        <title>ElasticSearch Status</title>
        <search>
          <query>index="performance"| stats first(elastic_search_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">99</option>
        <option name="unit">- Elastic</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Spark Status</title>
        <search>
          <query>index="performance"| stats first(spark_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">114</option>
        <option name="unit">- Spark</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>HDFS Status</title>
        <search>
          <query>index="performance"| stats first(hdfs_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">109</option>
        <option name="unit">- HDFS</option>
        <option name="unitPosition">after</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Flume Status</title>
        <search>
          <query>index="performance"| stats first(flume_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">110</option>
        <option name="unit">- Flume</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Percentage Availability over the past 8 hours</title>
        <search>
          <query>index = "performance" | timechart first(availability) as "Availability (%)"</query>
          <earliest>-4h@m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisY.maximumNumber">100</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="height">248</option>
        <drilldown>
          <link>
            <link target="app/javascript_on_dashboards/dashboards">app/javascript_on_dashboards/dashboards</link>
          </link>
        </drilldown>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Amount of Data Returned by Query (Mb)</title>
        <search>
          <query>index="performance"| timechart first(data_returned) as DataReturned</query>
          <earliest>-4h@m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">area</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Cumulative Number of Queries</title>
        <search>
          <query>index="performance"| timechart first(number_of_queries) as Number_of_queries | accum Number_of_queries as totalvalue</query>
          <earliest>-4h@m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">line</option>
        <option name="charting.legend.placement">bottom</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Time to Ingest</title>
        <search>
          <query>index="performance"| timechart first(time_to_ingest) as TimeToIngest</query>
          <earliest>-4h@m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.legend.placement">bottom</option>
      </chart>
    </panel>
  </row>
</dashboard>