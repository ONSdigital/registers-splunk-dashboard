<dashboard stylesheet="trafficlight.css">
  <label>AlphaDemo</label>
  <description>This is the demo dashboard for the Alpha proof of concept.</description>
  <row>
    <panel>
      <single>
        <title>Splunk License Usage</title>
        <search>
          <query>index="_internal" source="*metrics.log" per_index_thruput | eval GB=kb/(1024*1024) | timechart span=1d sum(GB) | convert ctime(_time) as timestamp</query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="colorMode">block</option>
        <option name="height">131</option>
        <option name="numberPrecision">0.0</option>
        <option name="rangeColors">["0x65a637","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[75,85]</option>
        <option name="showSparkline">0</option>
        <option name="showTrendIndicator">0</option>
        <option name="unit">%</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">0</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Uptime (minutes)</title>
        <search>
          <query>index="performance"| stats first(uptime) as Uptime</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="height">132</option>
        <option name="rangeColors">["0x65a637","0xd93f3c"]</option>
        <option name="rangeValues">[100000]</option>
        <option name="showSparkline">0</option>
        <option name="showTrendIndicator">0</option>
        <option name="unit">mins</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Percentage of Failed Queries (%)</title>
        <search>
          <query>index="performance"| stats first(percentage_failed_queries) as Uptime</query>
          <earliest>0</earliest>
          <latest></latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="height">131</option>
        <option name="rangeColors">["0x65a637","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[1.1,21]</option>
        <option name="unit">%</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Single Match Time (s)</title>
        <search>
          <query>index="performance" | timechart avg(single_match_time) as single_match_time</query>
          <earliest>rt-1h</earliest>
          <latest>rt</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="height">131</option>
        <option name="rangeValues">[2,4,5,7]</option>
        <option name="trendDisplayMode">percent</option>
        <option name="unit">s</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Bulk Match Time (s)</title>
        <search>
          <query>index="performance" | timechart avg(bulk_match_time) as BulkMatchTime</query>
          <earliest>rt-1h</earliest>
          <latest>rt</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="colorMode">block</option>
        <option name="height">130</option>
        <option name="rangeValues">[50,55,57,58]</option>
        <option name="trendDisplayMode">percent</option>
        <option name="unit">s</option>
        <option name="useColors">1</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <single>
        <title>Elastic Status</title>
        <search>
          <query>index="performance"| stats first(elastic_search_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">125</option>
        <option name="unit">- Elastic</option>
        <option name="unitPosition">after</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Spark Status</title>
        <search>
          <query>index="performance"| stats first(spark_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">123</option>
        <option name="unit">- Spark</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>HDFS Status</title>
        <search>
          <query>index="performance"| stats first(hdfs_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">135</option>
        <option name="unit">- HDFS</option>
        <option name="unitPosition">after</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Flume Status</title>
        <search>
          <query>index="performance"| stats first(flume_status) as value | rangemap field=value none=0-0 low=1-1 elevated=2-2 severe=3-3 default=none</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="classField">range</option>
        <option name="field">value</option>
        <option name="height">131</option>
        <option name="unit">- Flume</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Percentage Availability over the past 8 hours</title>
        <search>
          <query>index="performance"| stats first(availability) as Availability(%) by _time</query>
          <earliest>rt-1h</earliest>
          <latest>rt</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">area</option>
        <option name="height">248</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Amount of Data Returned by Query (Mb)</title>
        <search>
          <query>index="performance"| stats first(data_returned) as DataReturned by _time</query>
          <earliest>rt-1h</earliest>
          <latest>rt</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">area</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Cumulative Number of Queries</title>
        <search>
          <query>index="performance"| stats first(number_of_queries) as Number_of_queries by _time | reverse | accum Number_of_queries as totalvalue</query>
          <earliest>@d</earliest>
          <latest>now</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">line</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Time to Ingest</title>
        <search>
          <query>index="performance"| stats first(time_to_ingest) as TimeToIngest by _time</query>
          <earliest>rt-1h</earliest>
          <latest>rt</latest>
          <refresh>30s</refresh>
          <refreshType>delay</refreshType>
        </search>
        <option name="charting.chart">area</option>
      </chart>
    </panel>
  </row>
</dashboard>
